# @(#)[:xT;m3F%!VoaSgSW>IBIA: 2017-08-06 14:22:04 Z tw@csongor]
# vim: filetype=ksh tabstop=4 textwidth=72 noexpandtab

# FUNCTION ^[^Udescription text^u^]
#   Add new todo item with ^Udescription text^u or open a window to edit 
#   the description text if none is given. Uses ^S./TODO^s.

function todo {
	local now="$(date -u +'%Y-%m-%d %H:%M:%S Z')"
	local H="@ $now" TODO="$*"
	[[ -n $TODO ]]|| TODO="$(vtmp TODO)"
	splitstr NL "$TODO" todo
	[[ -f RCS/TODO,v ]]&& co -q -l TODO
	{ printf '%s\n' "$H"; printf '    %s\n' "${todo[@]}"; } >>TODO
	[[ -f RCS/TODO,v ]]&& ci -q -m'add' -u TODO
	true # leave on a good note, even if there is no RCS
}


# Copyright Â© 2017 by Tom Davis <tom@greyshirt.net>.
